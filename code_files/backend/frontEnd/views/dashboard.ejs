<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel=stylesheet href="/static/css/dashStyle.css">
    <meta charset="UTF-8">

    <script type="text/javascript">
        $(document).ready(function(){
            $('#sumbitFood').click(function(){
                var databack_su = $("#food_modal #sunday").val().trim();
                    $('#su_cals').html(databack_su);
                var databack_mo = $("#food_modal #monday").val().trim();
                    $('#mo_cals').html(databack_mo);
                var databack_tu = $("#food_modal #tuesday").val().trim();
                    $('#tu_cals').html(databack_tu);
                var databack_we = $("#food_modal #wednesday").val().trim();
                    $('#we_cals').html(databack_we);
                var databack_th = $("#food_modal #thursday").val().trim();
                    $('#th_cals').html(databack_th);
                var databack_fr = $("#food_modal #friday").val().trim();
                    $('#fr_cals').html(databack_fr);
                var databack_sa = $("#food_modal #saturday").val().trim();
                    $('#sa_cals').html(databack_sa);
            });
        });

        $(document).ready(function(){
            $('#sumbitWater').click(function(){
                var databack_1 = $("#water_modal #sunday").val().trim();
                    $('#su_wat').html(databack_1);
                var databack_2 = $("#water_modal #monday").val().trim();
                    $('#mo_wat').html(databack_2);
                var databack_3 = $("#water_modal #tuesday").val().trim();
                    $('#tu_wat').html(databack_3);
                var databack_4 = $("#water_modal #wednesday").val().trim();
                    $('#we_wat').html(databack_4);
                var databack_5 = $("#water_modal #thursday").val().trim();
                    $('#th_wat').html(databack_5);
                var databack_6 = $("#water_modal #friday").val().trim();
                    $('#fr_wat').html(databack_6);
                var databack_7 = $("#water_modal #saturday").val().trim();
                    $('#sa_wat').html(databack_7);
            });
        });
    </script>

    <title>Dashboard</title>
</head>

<body>
    <div class="hero-image">
        <div class="container-fluid"><p class="hero-text display-3">Welcome, <%=user.username  %></p>  </div>
    </div>
    <br><br><br>
    <div>
        <nav class="navbar navbar-fixed-top" style="background-color:#4ad646">
            <div class="container-fluid text-white" >
                <div class="navbar-header">
                    <a class="navbar-brand" style="color:black">Fit Track</a>
                </div>
                <ul class="nav navbar-nav list-inline">
                <li class="list-inline-item"><form id="navlink3" method="GET" action="/"><a href="#" style="color:black" onclick="document.getElementById('navlink3').submit()">Home</a></form></li>
                <li class="list-inline-item"><form id="navlink2" method="GET" action="/api/Excercises"><a href="#" style="color:black" onclick="document.getElementById('navlink2').submit()">Exercises</a></form></li>
                <!-- <li class="list-inline-item"><form id="navlink3" method="POST" action="/api/dashboard"> -->
                                    <!--  <a href="#" type="submit" style="color:black" onclick="document.getElementById('navlink3').submit()">Dashboard</a></form></li> -->
                <li class="active list-inline-item"><form id="navlink1" method="POST" action="/api/signout"><a href="#" style="color:black" onclick="document.getElementById('navlink1').submit()">Sign Out</a></form></li> <!-- These all need to be linked -->

                <!-- <li class="list-inline-item"><a href="#" style="color:white">Community</a></li> -->
                </ul>
            </div>
        </nav>
    </div>
    <div class="container" id="wrapper">
        <div class="card" id="first">
            <div class="card-body">
                <div class="container-fluid" id="av1container">
                    <%-self.img_src%>
                    <div class="middle">
                        <button class="btn btn-dark" value="Change Pic" data-toggle="modal" data-target="#pic_modal">Change Pic</button>
                    </div>
                </div>
                <h1 name="name"><%=self.name%></h1>
                <!-- <p class="title" id="">title</p> -->
                <p style="width: 225px"><%=self.bio%></p>
                <!-- <a href="#"><i class="fa fa-twitter"></i></a> -->
                <!-- <a href="#"><i class="fa fa-linkedin"></i></a> -->
                <!-- <a href="#"><i class="fa fa-facebook"></i></a> -->
                <br>
                <input type="button" class="btn btn-secondary" data-toggle="modal" data-target="#dash_modal" placeholder="Enter bio here" value="About me">
                <!-- </form> -->
                    <div class="modal fade" id="dash_modal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">About me:</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form method="POST" action="/api/dashboard">       <!-- This is a form page for the bio of the user -->
                                <div class="modal-body">
                                    <div class="form-group">
                                        Name:
                                        <input name="name" class="form-control" placeholder="Enter name" value="<%=self.name%>"></input>
                                    </div>
                                    <div class="form-group">
                                    Bio:
                                    <textarea id="bioarea" class="form-control" name="bio" placeholder="Enter bio"><%= self.bio %></textarea>
                                    </div>
                                    <!-- <input type="hidden" name="username" value="<%=self.username%>"/> -->
                                </div>
                                <div class="modal-footer">
                                    <input type="hidden" name="_method" value="put"/>
                                    <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-info">Save changes</button>
                                </div>
                            </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="pic_modal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Edit Profile Picture:</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form method="POST" action="/api/dashboard/avatar" enctype="multipart/form-data">
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label for="filehover">Select an image:</label>
                                        <input type="file" class="form-control-file" id="filehover" name="avatar">
                                    </div>
                                    <!-- <input type="hidden" name="username" value="<%=self.username%>"/> -->
                                </div>
                                <div class="modal-footer">
                                    <!-- <input type="hidden" name="_method" value="put"/> -->
                                    <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-info">Save changes</button>
                                </div>
                            </form>
                            </div>
                        </div>
                    </div>
            <!-- Used to present heigh weight and other stats about the user-->
            <div>
                <br><br>
                <p style = "width: 300px"><img src="/static/images/measuring-tape.png" alt="height"> Height:<%= stats.height %> inches</p>
            </div>
            <p style = "width: 300px"><img src="/static/images/weight.png" alt="weight"> Weight: <%= stats.weight %> pounds</p>
            <p style = "width: 300px"><img src="/static/images/weight.png" alt="target_weight"> Target Weight: <%= stats.weightGoal %> pounds</p>
            <p style = "width: 300px"><img src="/static/images/time.png" alt="age">  Age: <%= stats.age %> years</p>
            <p style = "width: 300px"><img src="/static/images/gender.png" alt="gender">  Gender: <%= stats.gender %></p>
            <button type = "button" class="btn btn-secondary" data-toggle="modal" data-target="#formModal">
                Add my stats
            </button>
            <div class="modal fade" id="formModal">
                <div class="modal-dialog modal-login">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title">Enter Your Stats</h4>
                      <button type="button" class="close" data-dismiss="modal">x</button>
                    </div>
                    <form method="POST" action="/api/dashboard">
                    <div class="modal-body">
                      <div class="form-group">
                        <label>Height</label>
                        <input id="height" type="text" class="form-control" name="height" placeholder="ex. 68in" value="<%=stats.height%>"></input>
                      </div>
                      <div class="form-group">
                        <label>Weight</label>
                        <input id="weight" type="text" class="form-control" name="weight" placeholder="ex. 125lbs" value="<%= stats.weight %>"></input>
                      </div>
                      <div class="form-group"> <!--Added Age and Gender-->
                        <label>Age</label>
                        <input id="age" type="text" class="form-control" name="age" placeholder="ex. 25yrs" value="<%= stats.age %>"></input>
                      </div>
                      <div class="form-group">
                        <label>Gender</label>
                        <input id="gender" type="text" class="form-control" name="gender" placeholder="ex. Male" value="<%= stats.gender %>"></input>
                      </div>
                      <div class="form-group">
                            <label>Target Weight</label>
                            <input id="targetWeight" type="text" class="form-control" name="weightGoal" placeholder="ex. 165lbs" value ="<%= stats.weightGoal %>"></input>
                        </div>
                        <div class="form-group">
                            <label>Bench Press</label>
                            <input id="bench" type="text" class="form-control" name="bench" placeholder="ex. 165lbs" value="<%=stats.bench%>"></input>
                        </div>
                      <div class="form-group">
                        <button type="submit" id="statSubmit" class="btn btn-info">Submit Stats</button>
                      </div>
                    </div>
                    <input type="hidden" name="_method" value="put"/>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <div class="tableFixHead">
            <table class="table" id="second">
                <thead class="thead-dark">
                    <tr><th>Exercises</th><th>Current best</th></tr>
                </thead>
                <tbody class="p-3 mb-2 bg-info text-body">
                    <tr><td>A1</td><td>A2</td></tr>
                    <tr><td>B1</td><td>B2</td></tr>
                    <tr><td>C1</td><td>C2</td></tr>
                    <tr><td>D1</td><td>D2</td></tr>
                    <tr><td>E1</td><td>E2</td></tr>
                </tbody>
            </table>
        </div>
        <br>
        <div class="modal fade" id = "food_modal">
              <div class="modal-dialog modal-login">
                  <div class = "modal-content">
                      <div class = "modal-header">
                          <h4 class = "modal-title"> Enter for your caloric intake</h4>
                          <button type="button" class ="close" data-dismiss="modal">x</button>
                      </div>
                      <form method="POST" action="/api/dashboard">
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Sunday</label>
                                <input type="text" id ="sunday" class="form-control" name="fod_sunday" placeholder="2500 Calories"></input>
                            </div>
                            <div class="form-group">
                                <label>Monday</label>
                                <input type="text" id ="monday" class="form-control" name="fod_sunday" placeholder="2000 Calories"></input>
                            </div>
                            <div class="form-group">
                                <label>Tuesday</label>
                                <input type="text" id ="tuesday" class="form-control" name="fod_sunday" placeholder="3000 Calories"></input>
                            </div>
                            <div class="form-group">
                                <label>Wednesday</label>
                                <input type="text" id ="wednesday" class="form-control" name="fod_sunday" placeholder="2250 Calories"></input>
                            </div>
                            <div class="form-group">
                                <label>Thursday</label>
                                <input type="text" id ="thursday" class="form-control" name="fod_sunday" placeholder="2000 Calories"></input>
                            </div>
                            <div class="form-group">
                                <label>Friday</label>
                                <input type="text" id ="friday" class="form-control" name="fod_sunday" placeholder="1800 Calories"></input>
                            </div>
                            <div class="form-group">
                                <label>Saturday</label>
                                <input type="text" id ="saturday" class="form-control" name="fod_sunday" placeholder="3000 Calories"></input>
                            </div>
                            <div class="form-group">
                                <button type="button" id="sumbitFood" class="btn btn-danger" data-dismiss="modal">Submit</button>
                            </div>
                        </div>
                        <input type="hidden" name ="_method" value = "put">
                      </form>
                  </div>
              </div>
            </div>
        <div class="tableFixHead">
            <table class="table" id="second">
                <thead class="thead-dark">
                    <tr><th>Day</th><th>Caloric Intake (CALORIES)</th><th>Daily Total (CALORIES)</th></tr>
                </thead>
                <tbody class="p-3 mb-2 bg-info text-body">
                    <tr><td>Sunday</td><td><div id = "su_cals"></td><td>2000</td></tr>
                    <tr><td>Monday</td><td><div id = "mo_cals"></td><td>2000</td></tr>
                    <tr><td>Tuesday</td><td><div id = "tu_cals"></td><td>2000</td></tr>
                    <tr><td>Wednesday</td><td><div id = "we_cals"></td><td>2000</td></tr>
                    <tr><td>Thursday</td><td><div id = "th_cals"></td><td>2000</td></tr>
                    <tr><td>Friday</td><td><div id = "fr_cals"></td><td>2000</td></tr>
                    <tr><td>Saturday</td><td><div id = "sa_cals"></td><td>2000</td></tr>
                </tbody>
            </table>
        </div>
        <br>
        <button type="button" class = "btn btn-info" data-toggle = "modal" data-target="#food_modal">Enter Food Intake</button>
        <br>
        <div class="modal fade" id = "water_modal">
              <div class="modal-dialog modal-login">
                  <div class = "modal-content">
                      <div class = "modal-header">
                          <h4 class = "modal-title"> Enter your water intake for the day (cups)</h4>
                          <button type="button" class ="close" data-dismiss="modal">x</button>
                      </div>
                      <form method="POST" action="/api/dashboard">
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Sunday</label>
                                <input type="text" id ="sunday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                                <label>Monday</label>
                                <input type="text" id ="monday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                                <label>Tuesday</label>
                                <input type="text" id ="tuesday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                                <label>Wednesday</label>
                                <input type="text" id ="wednesday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                                <label>Thursday</label>
                                <input type="text" id ="thursday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                                <label>Friday</label>
                                <input type="text" id ="friday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                                <label>Saturday</label>
                                <input type="text" id ="saturday" class="form-control" name="fod_sunday" placeholder="10 cups"></input>
                            </div>
                            <div class="form-group">
                               <button type="button" id="sumbitWater" class="btn btn-danger" data-dismiss="modal">Submit</button>
                            </div>
                        </div>
                        <input type="hidden" name ="_method" value = "put">
                      </form>
                  </div>
              </div>
            </div>
            <br>
        <div class="tableFixHead">
            <table class="table" id="second">
                <thead class="thead-dark">
                    <tr><th>Day</th><th>Water Intake</th><th>Daily Total (cups)</th></tr>
                </thead>
                <tbody class="p-3 mb-2 bg-info text-body">
                  <tr><td>Sunday</td><td><div id = "su_wat"></td><td>15.5</td></tr>
                  <tr><td>Monday</td><td><div id = "mo_wat"></td><td>15.5</td></tr>
                  <tr><td>Tuesday</td><td><div id = "tu_wat"></td><td>15.5</td></tr>
                  <tr><td>Wednesday</td><td><div id = "we_wat"></td><td>15.5</td></tr>
                  <tr><td>Thursday</td><td><div id = "th_wat"></td><td>15.5</td></tr>
                  <tr><td>Friday</td><td><div id = "fr_wat"></td><td>15.5</td></tr>
                  <tr><td>Saturday</td><td><div id = "sa_wat"></td><td>15.5</td></tr>
                </tbody>
            </table>
        </div>
        <br>
        <button type="button" class = "btn btn-info" data-toggle = "modal" data-target="#water_modal">Enter Water Intake</button>
        <br></br>
        <h5> Your Weight Loss Goal Progress </h5>
        <div type="hidden" id="goalWeight" value="<%=stats.weightGoal%>"></div>
        <div type="hidden" id="currWeight" value="<%=stats.weight%>"></div>
        <div class="progress" style="height: 20px;">
          <div id="progbar" class="progress-bar bg-info" role="progressbar" style="width:0%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
          
          </div>
        </div>
        <script>
            var wg = document.getElementById('goalWeight').getAttribute("value");
            var w = document.getElementById('currWeight').getAttribute("value");
            var percent = 0.00;

            if (wg>w){
                percent=parseFloat(w/wg);
            } else {
                percent=parseFloat(wg/w);
            }

            console.log(percent + ' is before percent');
            if (percent>2.00){
                percent=0;
            } else if (percent>1.00){
                percent=percent-1.00;
            }
            percent=percent*100.00;

            console.log(percent + ' is percent');
            document.getElementById('progbar').style['width'] = percent + '%';
            document.getElementById('progbar').innerHTML = parseInt(percent) + '% towards weight goal!';
        </script>
    </div>
</body>

</html>
